!function(){window.App=Ember.Application.create()}(),function(){App.IndexController=Ember.Controller.extend({})}(),function(){App.InputController=Ember.Controller.extend({latitude:null,longitude:null,needs:["location"],actions:{sendAddress:function(a){this.get("controllers.location").send("receiveAddress",a)},detectLocation:function(){}}})}(),function(){App.LocationController=Ember.Controller.extend({isEmpty:!0,address:null,latitude:null,longitude:null,google:null,geocoder:null,latlng:function(){return this.get("latitude")+","+this.get("longitude")}.property("latitude","longitude"),init:function(){this._super();var a=this.get("google");this.set("geocoder",new a.maps.Geocoder)},needs:["restaurant"],actions:{receiveAddress:function(a){this.getLocationByAddress(a)}},getLocationByAddress:function(a){{var b=this,c=this.get("google");this.get("geocoder")}this.get("geocoder").geocode({address:a},function(a,d){d==c.maps.GeocoderStatus.OK&&(b.setLocation(a[0]),b.get("controllers.restaurant").send("receiveCoordinates",b.get("latlng")))})},getLocationByCoordinates:function(){},setLocation:function(a){this.set("address",a.formatted_address),this.set("latitude",a.geometry.location.lat()),this.set("longitude",a.geometry.location.lng())}})}(),function(){App.RestaurantController=Ember.Controller.extend({isEmpty:!0,id:null,name:null,location:{address:null,postalCode:null,city:null,country:null},url:null,contact:{phone:null},category:null,amplify:null,init:function(){this._super(),this.get("amplify").request.define("foursquare","ajax",{url:"http://api.edinerguide.de/foursquare",dataType:"json",type:"GET"})},actions:{receiveCoordinates:function(a){this.findRestaurant(a)}},setRestaurant:function(a){this.set("id",a.id),this.set("name",a.name),this.set("location.address",a.location.address),this.set("location.postalCode",a.location.postalCode),this.set("location.city",a.location.city),this.set("location.country",a.location.country),this.set("url",a.url),this.set("category",a.categories[0].name)},findRestaurant:function(a){var b={ll:a,query:"restaurant",radius:500,explore:1},c=this,d=this.get("amplify");this.get("amplify").request("foursquare",b,function(a){var b=a.response.groups[0].items,e=b[Math.floor(Math.random()*b.length)].venue;d.request("foursquare",{id:e.id},function(a){c.setRestaurant(a.response.venue)})})}})}(),function(){App.Store=DS.Store.extend(),App.ApplicationAdapter=DS.FixtureAdapter}(),function(){App.ApplicationRoute=Ember.Route.extend({})}(),function(){App.Router.map(function(){})}(),function(){App.register("amplify:main",amplify,{instantiate:!1,singleton:!0}),App.inject("controller:restaurant","amplify","amplify:main"),App.register("google:main",google,{instantiate:!1,singleton:!0}),App.inject("controller:location","google","google:main")}();